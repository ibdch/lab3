<!DOCTYPE html>
<html style="font-size: 16px;">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords"
    content="​IT Company, ​The backbone for internet business, Company Services, ​Large payments volume or unique business model?, ​What’s included, What We Do, Custom software solutions">
  <meta name="description" content="">
  <meta name="page_type" content="np-template-header-footer-from-plugin">
  <title>Главная</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="Главная.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 4.7.1, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i|Cambay:400,400i,700,700i">


  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "images/logo.png"
}</script>
  <!-- <script src="textanalising.js"></script> -->
  <meta name="theme-color" content="#4d6eaa">
  <meta property="og:title" content="Главная">
  <meta property="og:type" content="website">
</head>

<body data-home-page="главная.php" data-home-page-title="Главная" class="u-body u-xl-mode">
  <header class="u-clearfix u-header u-header" id="sec-d9ff">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <a href="https://www.nkzu.kz/?lang=ru" class="u-image u-logo u-image-1" title="СКГУ" data-image-width="457"
        data-image-height="99">
        <img src="images/logo.png" class="u-logo-image u-logo-image-1">
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-nav-container">

        </div>
        <div class="u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>


              </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <section class="u-align-left u-clearfix u-section-1" id="sec-9d66">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-expanded-width u-list u-list-1">
        <div class="u-repeater u-repeater-1">
          <div class="u-container-style u-list-item u-repeater-item">
            <div class="u-container-layout u-similar-container u-container-layout-1">
             
            
              </a>
            </div>
          </div>
         
          <div class="u-container-style u-list-item u-repeater-item">
            <div class="u-container-layout u-similar-container u-container-layout-3">
              <div class="fr-view u-clearfix u-custom-item u-rich-text u-text u-text-3">
                <h4 style="line-height: 1;">
                  <span class="u-custom-font u-font-arial">Соответствие требованиям</span>
                </h4>
                <p style="line-height: 0.8;">
                  <span class="u-custom-font u-font-arial"></span>
                </p>
                <p style="line-height: 0.8;">
                  <span  id="countword"class="u-custom-font u-font-arial">&nbsp;</span>
                </p>
              </div>
              
                 
              </a>
            </div>
          </div>
          <div class="u-container-style u-list-item u-repeater-item">
            <div class="u-container-layout u-similar-container u-container-layout-4">
              <div class="fr-view u-clearfix u-custom-item u-rich-text u-text u-text-4">
                <h4>
                  <span class="u-custom-font u-font-arial">Тошнота текста</span>
                </h4>
                <p>
                  <span id="toshnota" class="u-custom-font u-font-arial">Тошнота </span>
                </p>
                <p>
                  <span id="toshnotaWord" class="u-custom-font u-font-arial">- частоповторяемое слово -&nbsp;</span>
                </p>
              </div>
             
           
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="u-expanded-width u-form u-form-1">
        <form data-taskid="<?php echo $_GET["id"] ?>" data-userid="<?php echo $_GET["userid"] ?>" data-wordcount="<?php echo $_GET["wordcount"] ?>" id="form" action="#" method="POST" class="u-clearfix u-form-spacing-10 u-form-vertical u-inner-form" source="custom"
          name="form" style="padding: 10px;">


          <div class="u-form-group u-form-message">
            <label for="message-3203" class="u-form-control-hidden u-label"></label>
            <textarea placeholder="Введите Ваш текст" id="input" rows="4" cols="50" id="message-3203" name="message"
              class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required=""></textarea>
          </div>

          <div class="u-align-right u-form-group u-form-submit">
            <a href="#"  id="chek"style="display: block" class="u-btn u-btn-submit u-button-style but1">Проверить текст<br>
            </a>
            <input type="button" id="chek" class="u-form-control-hidden but1">
           
          </div>
          <div class="u-align-right u-form-group u-form-submit">
          <a href="#" style="display: none;"id="send" class="u-btn u-btn-submit u-button-style">Отправить<br>
          </a>
          <input type="button"  id="send" class="u-form-control-hidden">
          </div>
          <!-- <div class="u-form-send-message u-form-send-success"> Спасибо! Ваше сообщение отправлено. </div> -->
          <!-- <div class="u-form-send-error u-form-send-message"> Отправка не удалась. Пожалуйста, исправьте ошибки и попробуйте еще раз. </div> -->
          <!-- <input type="hidden" value="" name="recaptchaResponse"> -->
        </form>
      </div>
      <p class="u-custom-font u-font-arial u-text u-text-5">
        
      </p>
    </div>
  </section>



  <section class="u-backlink u-clearfix u-grey-80">
    <p class="u-text">
      <span>СКУ - Североказахстанский университет им. М.Козыбаева</span>
    </p>
  </section>
  <script>
     let send=document.getElementById('send');
    send.onclick=function(){
      analisandsend() 
    }
    let chek=document.getElementById('chek');
    chek.onclick=function(){
      analis() 
    }

    async function insert(text, nausiam,wordcount) {
      console.log(text)
      const taskid=document.getElementById('form').dataset.taskid
      const userid=document.getElementById('form').dataset.userid
      
      const url = 'http://localhost/insertesse.php';
      const data = {text: text, nausiam: nausiam,userid: userid,taskid: taskid,wordcount: wordcount};
      console.log(data)

      fetch(url, {
        method: 'POST', // или 'PUT'
        body: JSON.stringify(data), // данные могут быть 'строкой' или {объектом}!
        headers: { "Content-type": "application/x-www-form-urlencoded; charset=UTF-8" },
      }).then(res => res.json()).then((res) =>{console.log("seccess", res)} );
      window.location.href="Главная.php"

    }

   

    
    function analisandsend() {
     
      
      let textarea = document.getElementById("input")
      let text = textarea.value
      text = text.toLowerCase()
   
      text = text.replace(/\s{2,}/g, ' ')
      console.log(text)

      let newtext = text.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()''""]/g, "")
      console.log(newtext)
      let countword = newtext.split(" ").length
      if (countword.length>=10){
        console.log(">10")
      }
      let splitword = newtext.split(" ")
      let wordrepeats = []
      console.log(countword)
      let setsplitword = new Set(splitword) //множество не повторяющихся эллементов
      let setdelword = new Set(["а", "с", "но", "и", "за", "в", "же", "не", "что", "для", "на"])
      let cleartext = new Set([...setsplitword].filter(x => !setdelword.has(x)))
      cleartext.forEach(el => {
        let count = 0
        splitword.forEach(sub => {
          if (el == sub) {
            count++
          }
        })
        wordrepeats.push({ word: el, count: count })
      });
      let maxcount = 0
      let targetword
      wordrepeats.forEach(el => {
        if (el.count > maxcount) {
          maxcount = el.count
          targetword = el
        }
      })
      console.log(maxcount)
      console.log(targetword)
      console.log(wordrepeats);
      let nausiam = (maxcount / countword) * 100
      nausiam=Math.round(nausiam,2)
      console.log(nausiam)
      insert(text, nausiam,countword)
    }
    function analis() {
     
      

      let textarea = document.getElementById("input")
      let text = textarea.value
      text = text.toLowerCase()
    //  text = text.replace(/["."]/g, ". ")
      text = text.replace(/\s{2,}/g, ' ')
      console.log(text)

      let newtext = text.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()''""]/g, "")
      console.log(newtext)
      let countword = newtext.split(" ").length
      if (countword.length>=10){
        console.log(">10")
      }
      let splitword = newtext.split(" ")
      let wordrepeats = []
      console.log(countword)
      let setsplitword = new Set(splitword) //множество не повторяющихся эллементов
      let setdelword = new Set(["а", "с", "но", "и", "за", "в", "же", "не", "что", "для", "на"])
      let cleartext = new Set([...setsplitword].filter(x => !setdelword.has(x)))
      cleartext.forEach(el => {
        let count = 0
        splitword.forEach(sub => {
          if (el == sub) {
            count++
          }
        })
        wordrepeats.push({ word: el, count: count })
      });
      let maxcount = 0
      let targetword
      wordrepeats.forEach(el => {
        if (el.count > maxcount) {
          maxcount = el.count
          targetword = el
        }
      })
      console.log(maxcount)
      console.log(targetword)
      console.log(wordrepeats);
      let nausiam = (maxcount / countword) * 100
      nausiam=Math.round(nausiam,2)
      document.getElementById("toshnota").innerHTML = "Тошнота текста-" + nausiam + "%"
      document.getElementById("toshnotaWord").innerHTML = "Частоповторяемое слово-" + targetword.word
      const wordcount=document.getElementById('form').dataset.wordcount
      document.getElementById("countword").innerHTML=""
      if (countword>wordcount)
      {
        
        
        document.getElementById("countword").innerHTML ="Количество слов - "+ countword+", это больше необходимого"
      }
      else{
      document.getElementById('send').style.display='block'
      }

    }

  </script>
</body>

</html>